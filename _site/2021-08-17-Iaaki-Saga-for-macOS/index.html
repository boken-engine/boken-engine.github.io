<!DOCTYPE html>
<html lang="en">
<!-- Beautiful Jekyll 5.0.0 | Copyright Dean Attali 2020 -->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  

  

  <title>Iakkai Saga for macOS</title>

  
  <meta name="author" content="Boken Engine Team">
  

  <meta name="description" content="Running Iakkai on your macOS by Jose Celano">

  

  
  <meta name="keywords" content="swift,ios,framework,xcode,visual-novel,presentations">
  

  <link rel="alternate" type="application/rss+xml" title="Boken Engine" href="http://localhost:4000/feed.xml">

  

  

  

  


  
    
      
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">


    
      
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css">


    
      
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic">


    
      
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800">


    
  

  
    
      <link rel="stylesheet" href="/assets/css/bootstrap-social.css">
    
      <link rel="stylesheet" href="/assets/css/beautifuljekyll.css">
    
  

  

  
  
  

  

  
  <meta property="og:site_name" content="Boken Engine">
  <meta property="og:title" content="Iakkai Saga for macOS">
  <meta property="og:description" content="Running Iakkai on your macOS by Jose Celano">

  
  <meta property="og:image" content="http://localhost:4000/assets/img/iakkai-title-screen.png">
  

  
  <meta property="og:type" content="article">
  <meta property="og:article:author" content="Boken Engine Team">
  <meta property="og:article:published_time" content="2021-08-17T00:00:00+02:00">
  <meta property="og:url" content="http://localhost:4000/2021-08-17-Iaaki-Saga-for-macOS/">
  <link rel="canonical" href="http://localhost:4000/2021-08-17-Iaaki-Saga-for-macOS/">
  

  
  <meta name="twitter:card" content="summary_large_image">
  
  <meta name="twitter:site" content="@">
  <meta name="twitter:creator" content="@">

  <meta property="twitter:title" content="Iakkai Saga for macOS">
  <meta property="twitter:description" content="Running Iakkai on your macOS by Jose Celano">

  
  <meta name="twitter:image" content="http://localhost:4000/assets/img/iakkai-title-screen.png">
  

  


  

  

</head>


<body>

  


  <nav class="navbar navbar-expand-xl navbar-light fixed-top navbar-custom top-nav-regular"><a class="navbar-brand" href="http://localhost:4000/">Boken Engine</a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="main-navbar">
    <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/boken-engine/boken-engine">Docs</a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Sample Projects</a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                  <a class="dropdown-item" href="https://github.com/boken-engine/15-universe-facts">15 Universe Facts</a>
                  <a class="dropdown-item" href="https://github.com/boken-engine/iakkai-saga-the-curse-of-blood">IakkaI Saga</a>
            </div>
          </li>
        
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/boken-engine/boken-engine">GitHub</a>
          </li>
        <li class="nav-item">
          <a class="nav-link" id="nav-search-link" href="#" title="Search">
            <span id="nav-search-icon" class="fa fa-search"></span>
            <span id="nav-search-text">Search</span>
          </a>
        </li></ul>
  </div>

  

  
    <div class="avatar-container">
      <div class="avatar-img-border">
        <a href="http://localhost:4000/">
          <img alt="Navigation bar avatar" class="avatar-img" src="/assets/img/boken-icon.png" />
        </a>
      </div>
    </div>
  

</nav>



<div id="beautifuljekyll-search-overlay">

  <div id="nav-search-exit" title="Exit search">✕</div>
  <input type="text" id="nav-search-input" placeholder="Search">
  <ul id="search-results-container"></ul>
  
  <script src="https://unpkg.com/simple-jekyll-search@latest/dest/simple-jekyll-search.min.js"></script>
  <script>
    var searchjson = '[ \
       \
        { \
          "title"    : "Iakkai Saga for macOS", \
          "category" : "iakkaidemomacOS", \
          "url"      : "/2021-08-17-Iaaki-Saga-for-macOS/", \
          "date"     : "August 17, 2021" \
        }, \
       \
        { \
          "title"    : "Iakkai Saga available on the App Store!", \
          "category" : "bokeniakkaidemoapp store", \
          "url"      : "/2021-08-13-Iaaki-Saga-on-the-Apple-Store/", \
          "date"     : "August 13, 2021" \
        }, \
       \
        { \
          "title"    : "A challenging journey", \
          "category" : "boken", \
          "url"      : "/2021-06-28-a-challenging-journey/", \
          "date"     : "June 28, 2021" \
        }, \
       \
       \
        { \
          "title"    : "Boken Engine", \
          "category" : "page", \
          "url"      : "/", \
          "date"     : "January 1, 1970" \
        }, \
       \
        { \
          "title"    : "Tag Index", \
          "category" : "page", \
          "url"      : "/tags/", \
          "date"     : "January 1, 1970" \
        } \
       \
    ]';
    searchjson = JSON.parse(searchjson);

    var sjs = SimpleJekyllSearch({
      searchInput: document.getElementById('nav-search-input'),
      resultsContainer: document.getElementById('search-results-container'),
      json: searchjson
    });
  </script>
</div>





  <!-- TODO this file has become a mess, refactor it -->






  <div id="header-big-imgs" data-num-img=1
    
    
    
      
      data-img-src-1="http://localhost:4000/assets/img/macos-cover.jpg"
    
    
    
  ></div>


<header class="header-section has-img">

<div class="big-img intro-header">
  <div class="container-md">
    <div class="row">
      <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1">
        <div class="post-heading">
          <h1>Iakkai Saga for macOS</h1>
          
            
              <h2 class="post-subheading">Running Iakkai on your macOS by Jose Celano</h2>
            
          

          
            <span class="post-meta">Posted on August 17, 2021</span>
            
            
          
        </div>
      </div>
    </div>
  </div>
  <span class='img-desc'></span>
</div>

<div class="intro-header no-img">
  <div class="container-md">
    <div class="row">
      <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1">
        <div class="post-heading">
          <h1>Iakkai Saga for macOS</h1>
          
            
              <h2 class="post-subheading">Running Iakkai on your macOS by Jose Celano</h2>
            
          

          
            <span class="post-meta">Posted on August 17, 2021</span>
            
            
          
        </div>
      </div>
    </div>
  </div>
</div>
</header>





<div class=" container-md ">
  <div class="row">
    <div class=" col-xl-8 offset-xl-2 col-lg-10 offset-lg-1 ">

      

      

      <article role="main" class="blog-post">
        <p>Althougth you can easily build and run the <a href="https://github.com/boken-engine/iakkai-saga-the-curse-of-blood">Iakka demo project</a> on your macOS, we wanted to have a simpler way to execute it. We wanted to show what you can build using Boken Engine even before knowing how to do it.</p>

<p>That’s why we decided to build a macOS version. If you have an iOS device the simplest way is to install the Iakkai iOS App from the Apple App Store: <a href="https://apps.apple.com/app/id1580924283#?platform=ipad">Iakkai</a>.</p>

<p>If you do not have an iOS device you can <a href="/download/iakkai-1.0.zip">download Iakkai</a> and install it as a simple macOS app. You only need to double click to uncompress the file and copy the app to you <code class="language-plaintext highlighter-rouge">Application</code> folder.</p>

<p>We tried to publish it on the Mac App Store bus it was rejected by Apple reviewers. The reason was:</p>

<p><strong>“Guideline 4.2 - Design - Minimum Functionality”</strong></p>

<p>They argued the app was primarly a book.</p>

<p>In order to build the application for macOS we face mainly 2 issues:</p>

<ol>
  <li>Generate a build for macOS.</li>
  <li>Generate a distributable app outside the Mac App Store.</li>
</ol>

<h2 id="generating-a-macos-distributable">Generating a macOS distributable</h2>

<p>This task was surprisingly easy. We started reading Apple documentation about <a href="https://developer.apple.com/documentation/apple-silicon/running-your-ios-apps-on-macos">running iOS apps on macOS</a>. Since Boken Engine does not have any special dependency on phone features we only had to add some new xcode settings and build for macOS.</p>

<p><img src="/assets/img/deployment-info-macos.png" alt="Deployment Info configuration for macOS on xcode" /></p>

<p>Apple has develop a project call <a href="https://developer.apple.com/design/human-interface-guidelines/mac-catalyst/overview/introduction/">Mac Catalyst</a>. As they promise “you can make a Mac version of your iPad app”. Basically they use the same libraries under the hood whether you build for iOS or macOS.</p>

<p><img src="/assets/img/mac-catalyst-stack.png" alt="Mac Catalyst stack" /></p>

<p>Once we changed the settings, we tried to build for macOS. We had a build error in one of the methods we used to detect the devide orientation. We temporarily solved with build conditions, making ladscape the only orientation available for macOS.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">func</span> <span class="nx">getDeviceOrientation</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nx">DeviceOrientation</span> <span class="p">{</span>
    <span class="err">#</span><span class="k">if</span> <span class="nx">targetEnvironment</span><span class="p">(</span><span class="nx">macCatalyst</span><span class="p">)</span>
        <span class="k">return</span> <span class="nx">DeviceOrientation</span><span class="p">.</span><span class="nx">horizontal</span>
    <span class="err">#</span><span class="k">else</span>
    <span class="k">if</span> <span class="nx">UIApplication</span><span class="p">.</span><span class="nx">shared</span><span class="p">.</span><span class="nx">statusBarOrientation</span><span class="p">.</span><span class="nx">isLandscape</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">DeviceOrientation</span><span class="p">.</span><span class="nx">horizontal</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">DeviceOrientation</span><span class="p">.</span><span class="nx">vertical</span>
    <span class="p">}</span>
    <span class="err">#</span><span class="nx">endif</span>
<span class="p">}</span>
</code></pre></div></div>

<p>After fixig that build error we could run the app for macOS. So we tried to publish it on the Mac App Store. We followed the stardard process to publish directly using xcode but we got this error in the final step while we were uploading the app to the store:</p>

<p><img src="/assets/img/error-universal-binary-needed.png" alt="Universal binary needed upload error" /></p>

<p>The problem was we were builfing Boken Engine only for arm64 architecture.</p>

<p><img src="/assets/img/error-boken-engine-only-for-arm64.png" alt="Universal binary needed upload error" /></p>

<p>We had to change xcode setting in order to build Boken Engine for both architectures. After doing that we were able to submit the macOS app for review. Unfortunately the application was rejected as we mentioned before.</p>

<h2 id="generate-a-distributable-app-outside-the-mac-app-store">Generate a distributable app outside the Mac App Store</h2>

<p>Since we could not publish the app using the Mac App Store we decide to distribute it directly. After researching for different ways to do it we decided to go for the simplest one. You can also use xcode and <code class="language-plaintext highlighter-rouge">archive</code> a build for macOS. You have to the the same process you normally do when you upload the application build to the Store. But you have to choose the second option:</p>

<p><img src="/assets/img/distribute-app-with-developer-id.png" alt="Distribute app with Developer ID" /></p>

<p>xcode will magically handle all the process related to signing with your certificates. At the end of the process you have to submit the app to be <a href="https://developer.apple.com/documentation/security/notarizing_macos_software_before_distribution">notarized</a>. As Apple says:</p>

<blockquote>
  <p>Notarization gives users more confidence that the Developer ID-signed software you distribute has been checked by Apple for malicious components.</p>
</blockquote>

<p>After some minutes (less than 10) you will receive and email and you can continue the process. You can eport the application distributable and run it on any macOS. The distributable is an <a href="https://en.wikipedia.org/wiki/Bundle_(macOS)">macOS bundle</a> (folder).</p>

<p>We wanted to generate a single file but keeping a simple installation package. Finally we decided to generate a zip file using the command <code class="language-plaintext highlighter-rouge">ditto</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>% ditto -c -k --keepParent DDD ZZZ
</code></pre></div></div>

<p>Where DDD is the path to the directory containing the app you have exported in the previous step and and ZZZ is the path where ditto creates the zip archive. That’s the app you can download avobe at the beginning of this post.</p>

<p>I hope this could help you to build and distributed your Boken Engine based macOS apps.</p>

<p>Generate a distributable app outside the Mac App Store</p>

<h2 id="conclusion">Conclusion</h2>

<p>As you can seeyou can build your apps using Boken Engine ans easily publish them for macOS. If you are planning to build for macOS we recommend you to integrate that version in your pipeline, so you do not get any surprise when you try to build the macOS version.</p>

<h2 id="links">Links</h2>

<p>Links about generating a macOS app from an iOS project:</p>

<ul>
  <li><a href="https://developer.apple.com/documentation/apple-silicon/running-your-ios-apps-on-macos">Running you iOS app on macOS</a></li>
  <li><a href="https://developer.apple.com/documentation/uikit/mac_catalyst/creating_a_mac_version_of_your_ipad_app">Creating a Mac Version of Your iPad App</a></li>
</ul>

<p>Links about distributing outside the Mac App Store:</p>

<ul>
  <li><a href="https://developer.apple.com/developer-id/">Distributing apps outside the Mac App Store</a></li>
  <li><a href="https://developer.apple.com/documentation/security/notarizing_macos_software_before_distribution">Notarizing macOS software before distribution</a></li>
  <li><a href="https://www.appcoda.com/distribute-macos-apps/">Beyond the Sandbox: Signing and distributing macOS apps outside of the Mac App Store</a></li>
  <li><a href="https://developer.apple.com/library/archive/documentation/Porting/Conceptual/PortingUnix/distributing/distibuting.html">Create dmg distribution file</a></li>
  <li><a href="https://developer.apple.com/forums/thread/128166">3 options for distributing macOS apps</a>
*<a href="https://developer.apple.com/forums/thread/128166">Signing a Mac Product For Distribution</a></li>
</ul>

      </article>

      
        <div class="blog-tags">
          <span>Tags:</span>
          
            <a href="/tags#iakkai">iakkai</a>
          
            <a href="/tags#demo">demo</a>
          
            <a href="/tags#macOS">macOS</a>
          
        </div>
      

      

      
        <!-- Check if any share-links are active -->




<section id = "social-share-section">
  <span class="sr-only">Share: </span>

  
    <a href="https://twitter.com/intent/tweet?text=Iakkai+Saga+for+macOS&url=http%3A%2F%2Flocalhost%3A4000%2F2021-08-17-Iaaki-Saga-for-macOS%2F"
      class="btn btn-social-icon btn-twitter" title="Share on Twitter">
      <span class="fab fa-fw fa-twitter" aria-hidden="true"></span>
      <span class="sr-only">Twitter</span>
    </a>
  

  
    <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2F2021-08-17-Iaaki-Saga-for-macOS%2F"
      class="btn btn-social-icon btn-facebook" title="Share on Facebook">
      <span class="fab fa-fw fa-facebook" aria-hidden="true"></span>
      <span class="sr-only">Facebook</span>
    </a>
  

  
    <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4000%2F2021-08-17-Iaaki-Saga-for-macOS%2F"
      class="btn btn-social-icon btn-linkedin" title="Share on LinkedIn">
      <span class="fab fa-fw fa-linkedin" aria-hidden="true"></span>
      <span class="sr-only">LinkedIn</span>
    </a>
  

  

  

</section>



      

      <ul class="pagination blog-pager">
        
        <li class="page-item previous">
          <a class="page-link" href="/2021-08-13-Iaaki-Saga-on-the-Apple-Store/" data-toggle="tooltip" data-placement="top" title="Iakkai Saga available on the App Store!">&larr; Previous Post</a>
        </li>
        
        
      </ul>
      
  <div class="disqus-comments">
  <div class="comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
	  var disqus_shortname = 'boken-engine';
	  /* ensure that pages with query string get the same discussion */
	  var url_parts = window.location.href.split("?");
	  var disqus_url = url_parts[0];
	  (function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	  })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</div>
  
  

  




    </div>
  </div>
</div>


  <footer>
  <div class="container-md beautiful-jekyll-footer">
    <div class="row">
      <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1">
      <ul class="list-inline text-center footer-links"><li class="list-inline-item">
    <a href="/feed.xml" title="RSS">
      <span class="fa-stack fa-lg" aria-hidden="true">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
      </span>
      <span class="sr-only">RSS</span>
    </a>
  </li><li class="list-inline-item">
    <a href="https://github.com/boken-engine" title="GitHub">
      <span class="fa-stack fa-lg" aria-hidden="true">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fab fa-github fa-stack-1x fa-inverse"></i>
      </span>
      <span class="sr-only">GitHub</span>
   </a>
  </li></ul>

      
      <p class="copyright text-muted">
      
        Boken Engine Team
        &nbsp;&bull;&nbsp;
      
      2021

      
        &nbsp;&bull;&nbsp;
        <span class="author-site">
          <a href="http://localhost:4000/">www.boken-engine.dev</a>
        </span>
      

      
      </p>
      <p class="theme-by text-muted">
        Powered by
        <a href="https://beautifuljekyll.com">Beautiful Jekyll</a>
      </p>
      </div>
    </div>
  </div>
</footer>


  
  
    
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" crossorigin="anonymous"></script>


  
    
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>


  
    
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>


  



  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
      <script src="/assets/js/beautifuljekyll.js"></script>
    
  









</body>
</html>
